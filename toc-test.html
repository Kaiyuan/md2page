<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç›®å½•åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
        .test-result {
            padding: 0.5rem;
            margin: 0.5rem 0;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        
        .demo-content {
            border: 1px solid #ddd;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 6px;
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>ç›®å½•åŠŸèƒ½æµ‹è¯•</h1>
    <div id="results"></div>
    
    <div class="demo-content">
        <h2>æµ‹è¯•å†…å®¹é¢„è§ˆ</h2>
        <div id="demo-html"></div>
    </div>

    <!-- å¼•å…¥ marked.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    
    <!-- åº”ç”¨è„šæœ¬ -->
    <script src="./js/classes.js"></script>

    <script>
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            document.getElementById('results').appendChild(div);
            console.log(message);
        }

        document.addEventListener('DOMContentLoaded', function() {
            addResult('å¼€å§‹ç›®å½•åŠŸèƒ½æµ‹è¯•...', 'info');
            
            // æ£€æŸ¥TOCGeneratorç±»
            if (typeof TOCGenerator === 'function') {
                addResult('âœ… TOCGenerator ç±»å®šä¹‰æ­£ç¡®', 'success');
                
                try {
                    const tocGenerator = new TOCGenerator();
                    addResult('âœ… TOCGenerator å®ä¾‹åˆ›å»ºæˆåŠŸ', 'success');
                    
                    // æµ‹è¯•ç›®å½•ç”Ÿæˆ
                    const testMarkdown = \`# ç¬¬ä¸€ç«  ä»‹ç»

è¿™æ˜¯ç¬¬ä¸€ç« çš„å†…å®¹ã€‚

## 1.1 æ¦‚è¿°

è¿™æ˜¯æ¦‚è¿°éƒ¨åˆ†ã€‚

## 1.2 ç‰¹æ€§

è¿™æ˜¯ç‰¹æ€§ä»‹ç»ã€‚

### 1.2.1 æ ¸å¿ƒç‰¹æ€§

æ ¸å¿ƒç‰¹æ€§è¯´æ˜ã€‚

### 1.2.2 æ‰©å±•ç‰¹æ€§

æ‰©å±•ç‰¹æ€§è¯´æ˜ã€‚

# ç¬¬äºŒç«  ä½¿ç”¨æ–¹æ³•

è¿™æ˜¯ç¬¬äºŒç« çš„å†…å®¹ã€‚

## 2.1 å¿«é€Ÿå¼€å§‹

å¿«é€Ÿå¼€å§‹æŒ‡å—ã€‚

## 2.2 é«˜çº§ç”¨æ³•

é«˜çº§ç”¨æ³•è¯´æ˜ã€‚\`;

                    // è½¬æ¢ä¸ºHTML
                    const converter = new MarkdownConverter();
                    const html = converter.parseMarkdown(testMarkdown);
                    
                    addResult('âœ… æµ‹è¯•å†…å®¹è½¬æ¢æˆåŠŸ', 'success');
                    
                    // ç”Ÿæˆç›®å½•
                    const tocData = tocGenerator.generateTOC(html);
                    
                    if (tocData.count > 0) {
                        addResult(\`âœ… ç›®å½•ç”ŸæˆæˆåŠŸï¼Œæ‰¾åˆ° \${tocData.count} ä¸ªæ ‡é¢˜\`, 'success');
                        addResult(\`æ ‡é¢˜åˆ—è¡¨: \${tocData.headings.map(h => h.text).join(', ')}\`, 'info');
                        
                        // æ˜¾ç¤ºç”Ÿæˆçš„HTMLå’Œç›®å½•
                        document.getElementById('demo-html').innerHTML = \`
                            <h3>ç”Ÿæˆçš„HTMLå†…å®¹ï¼š</h3>
                            <div style="border: 1px solid #ccc; padding: 1rem; background: white;">
                                \${html}
                            </div>
                            
                            <h3>ç”Ÿæˆçš„ç›®å½•ï¼š</h3>
                            <div style="border: 1px solid #ccc; padding: 1rem; background: white;">
                                \${tocData.html}
                            </div>
                        \`;
                        
                        addResult('âœ… ç›®å½•HTMLç”ŸæˆæˆåŠŸ', 'success');
                    } else {
                        addResult('âŒ ç›®å½•ç”Ÿæˆå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æ ‡é¢˜', 'error');
                    }
                    
                    addResult('ğŸ‰ ç›®å½•åŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                    
                } catch (error) {
                    addResult(\`âŒ ç›®å½•åŠŸèƒ½æµ‹è¯•å¤±è´¥: \${error.message}\`, 'error');
                    console.error('è¯¦ç»†é”™è¯¯:', error);
                }
            } else {
                addResult('âŒ TOCGenerator ç±»æœªå®šä¹‰', 'error');
            }
        });
    </script>
</body>
</html>